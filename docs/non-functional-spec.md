# 비기능 명세서 (Non-Functional Specification)

## 1. 개요

**프로젝트명**: 사워도우 베이킹 도우미
**버전**: 0.0.5
**최종 수정일**: 2025-12-29

이 문서는 시스템의 품질 속성, 성능 요구사항, 보안, 사용성 등 비기능적 요구사항을 정의합니다.

---

## 2. 성능 요구사항

### 2.1 응답 시간
- **계산 결과**: 입력 즉시 100ms 이내 표시
- **화면 전환**: 300ms 이내
- **데이터베이스 쿼리**: 평균 50ms 이내
- **레시피 저장**: 1초 이내 완료

### 2.2 처리량
- **동시 타이머**: 최소 10개 동시 실행 지원
- **레시피 목록**: 최대 1000개 레시피 지원
- **데이터베이스**: SQLite 기반, 로컬 처리로 제한 없음

### 2.3 메모리 사용
- **앱 메모리**: 200MB 이하 유지
- **백그라운드 서비스**: 50MB 이하
- **데이터베이스 크기**: 레시피당 평균 5KB

### 2.4 배터리 소모
- **백그라운드 타이머**: 24시간 실행 시 5% 미만 소모
- **화면 켜짐**: 일반적인 Flutter 앱 수준
- **최적화**: 매초 업데이트 대신 필요시만 UI 갱신

---

## 3. 플랫폼 요구사항

### 3.1 지원 플랫폼
- **Android**: API Level 21+ (Android 5.0 Lollipop 이상)
- **iOS**: iOS 12.0 이상 (예정)
- **Windows**: Windows 10 이상 (개발/테스트용)
- **macOS**: 10.14 이상 (예정)

### 3.2 화면 크기
- **최소 해상도**: 360x640 (Small Phone)
- **최대 해상도**: 1440x3040 (QHD+ Phone)
- **방향**: 세로 모드 고정 (Portrait only)

### 3.3 필수 권한
**Android**:
- `POST_NOTIFICATIONS`: 타이머 알림
- `FOREGROUND_SERVICE`: 백그라운드 타이머 실행
- `WAKE_LOCK`: 타이머 정확도 유지

**iOS** (예정):
- `NSUserNotificationsUsageDescription`: 알림 권한

---

## 4. 안정성 및 가용성

### 4.1 안정성
- **크래시율**: 0.1% 미만 목표
- **ANR (Android Not Responding)**: 0건 목표
- **데이터 손실**: 0건 (트랜잭션 보장)

### 4.2 오류 처리
- **네트워크 오류**: 오프라인 동작 (로컬 DB 사용)
- **데이터베이스 오류**: 롤백 및 사용자 알림
- **입력 오류**: 실시간 검증 및 피드백

### 4.3 데이터 무결성
- **트랜잭션**: Drift의 transaction() 사용
- **Cascade Delete**:
  - 레시피 삭제 시 관련 데이터 자동 삭제 (현재 미사용)
  - 타이머 스케줄 삭제 시 타이머 단계 자동 삭제
- **마이그레이션**: 스키마 버전 관리 (현재 v8)

### 4.4 백업 및 복구
- **로컬 데이터베이스**: 앱 삭제 시 데이터 손실
- **향후 계획**: 클라우드 백업/동기화

---

## 5. 보안

### 5.1 데이터 보안
- **로컬 저장소**: SQLite (암호화 미적용)
- **비밀번호**: 평문 저장 (TODO: 해싱 필요)
- **민감 정보**: 개인 레시피 정보만 저장 (결제/금융 정보 없음)

### 5.2 인증 및 권한
- **로그인**: 로컬 데이터베이스 검증 (TODO: 실제 구현 필요)
- **세션 관리**: 없음 (TODO)
- **다중 사용자**: 미지원 (단일 디바이스, 단일 사용자)

### 5.3 향후 보안 강화
- [ ] 비밀번호 해싱 (bcrypt/Argon2)
- [ ] SQLCipher를 통한 데이터베이스 암호화
- [ ] JWT 기반 인증 (클라우드 연동 시)
- [ ] HTTPS 통신 (API 서버 구축 시)

---

## 6. 사용성 (Usability)

### 6.1 사용자 경험 (UX)
- **직관성**: 첫 사용자도 가이드 없이 사용 가능
- **일관성**: Material Design 3 가이드라인 준수
- **피드백**:
  - 모든 액션에 즉각적인 피드백 (스낵바, 색상 변경)
  - 입력 필드 터치 시 전체 선택으로 빠른 수정
- **오류 방지**:
  - 숫자만 입력 가능 (InputFormatter)
  - 밀가루 합계 불일치 시 경고

### 6.2 접근성 (Accessibility)
- **폰트 크기**: 시스템 폰트 크기 설정 따름
- **색상 대비**: WCAG 2.1 AA 준수 (TODO: 검증 필요)
- **스크린 리더**: Flutter 기본 지원 (TODO: 테스트 필요)

### 6.3 학습 곡선
- **가이드 화면**: 주요 기능 설명
- **용어 설명**: 베이커스 퍼센티지, 르방 등 전문 용어 해설
- **템플릿 제공**: 타이머 기본 템플릿으로 빠른 시작

### 6.4 다국어 지원
- **현재**: 한국어만 지원
- **향후**: 영어, 일본어 추가 예정

---

## 7. 유지보수성 (Maintainability)

### 7.1 코드 품질
- **언어**: Dart 3.x
- **프레임워크**: Flutter 3.x
- **코드 스타일**: Dart 공식 가이드라인
- **린팅**: `flutter analyze` 통과

### 7.2 모듈화
- **화면 분리**: 각 기능별 별도 파일
- **데이터베이스**: Drift ORM 사용
- **비즈니스 로직**: 화면과 분리 (일부 TODO)
- **서비스**: Background Service 별도 모듈

### 7.3 테스트
- **단위 테스트**: 미구현 (TODO)
- **통합 테스트**: 미구현 (TODO)
- **위젯 테스트**: 미구현 (TODO)
- **수동 테스트**: 개발 중 수행

### 7.4 문서화
- **코드 주석**: 주요 함수에 주석 (TODO: 확대 필요)
- **README**: 기본 설명 (TODO)
- **API 문서**: Dart Doc (TODO)
- **명세서**: 본 문서

### 7.5 버전 관리
- **Git**: GitHub/GitLab (추정)
- **버전 번호**: Semantic Versioning (0.0.5)
- **태그**: 주요 릴리스에 태그 (TODO)

---

## 8. 확장성 (Scalability)

### 8.1 데이터 확장성
- **레시피 수**: 로컬 DB이므로 수천 개까지 문제없음
- **타이머 단계**: 단계 수 제한 없음
- **밀가루 종류**: 제한 없음 (UI 스크롤)
- **추가 재료**: 제한 없음 (UI 스크롤)

### 8.2 기능 확장성
- **플러그인 구조**: 없음 (모놀리식)
- **새 계산기 추가**: Screen 추가로 가능
- **새 타이머 템플릿**: 조건문 추가로 가능

### 8.3 플랫폼 확장성
- **Flutter 기반**: 크로스 플랫폼 지원
- **iOS 이식**: 코드 재사용률 95% 이상
- **Web**: 가능하나 백그라운드 서비스 제약

### 8.4 향후 확장 계획
- [ ] 클라우드 백엔드 연동
- [ ] 다중 사용자 계정
- [ ] 레시피 마켓플레이스
- [ ] AI 기반 레시피 추천

---

## 9. 이식성 (Portability)

### 9.1 플랫폼 독립성
- **Flutter**: 단일 코드베이스로 멀티 플랫폼 지원
- **의존성**: 플랫폼별 플러그인 사용
  - `flutter_background_service`: Android/iOS
  - `flutter_local_notifications`: Android/iOS
  - `drift`: 모든 플랫폼

### 9.2 데이터 이식성
- **SQLite**: 표준 포맷, 파일 복사로 이전 가능
- **JSON**: 레시피 내보내기/가져오기 (TODO)

### 9.3 환경 독립성
- **오프라인**: 완전 오프라인 동작
- **네트워크**: 불필요 (현재)
- **외부 서비스**: 없음

---

## 10. 호환성 (Compatibility)

### 10.1 하위 호환성
- **데이터베이스**: 마이그레이션으로 하위 호환
  - v1 → v2 → ... → v8
- **앱 버전**: 구버전 → 신버전 자동 마이그레이션

### 10.2 상위 호환성
- **Android**: 최신 API Level 지원
- **Flutter**: 최신 버전 따라가기

### 10.3 외부 호환성
- **파일 포맷**: JSON (표준)
- **데이터 교환**: 없음 (현재)

---

## 11. 규정 준수 (Compliance)

### 11.1 개인정보 보호
- **GDPR**: 해당 없음 (로컬 앱)
- **개인정보**: 이메일, 비밀번호만 수집
- **데이터 수집**: 외부 전송 없음
- **쿠키**: 없음

### 11.2 스토어 정책
- **Google Play**: 준수 필요
  - 개인정보 처리방침 (TODO)
  - 데이터 안전성 섹션 작성
- **Apple App Store**: 준수 필요 (TODO)
  - Privacy Nutrition Label

### 11.3 오픈소스 라이선스
- **Flutter**: BSD 3-Clause
- **Drift**: MIT License
- **기타 패키지**: pubspec.yaml 참조
- **라이선스 표시**: 설정 화면 추가 (TODO)

---

## 12. 모니터링 및 로깅

### 12.1 로깅
- **레벨**: Debug, Info, Warning, Error
- **위치**: 콘솔 출력 (개발 중)
- **프로덕션**: 로깅 비활성화 또는 최소화

### 12.2 에러 트래킹
- **현재**: 없음
- **향후**: Firebase Crashlytics 연동 (TODO)

### 12.3 성능 모니터링
- **현재**: 수동 테스트
- **향후**: Firebase Performance Monitoring (TODO)

### 12.4 사용자 분석
- **현재**: 없음
- **향후**: Firebase Analytics (TODO)
  - 화면 조회수
  - 기능 사용 빈도
  - 타이머 완료율

---

## 13. 배포 및 설치

### 13.1 배포 방식
- **Android**: APK/AAB 파일
- **iOS**: IPA 파일 (TODO)
- **스토어**: Google Play, App Store (TODO)

### 13.2 최소 요구사항
- **Android**:
  - OS: Android 5.0 (API 21)
  - RAM: 2GB
  - 저장공간: 100MB
- **iOS**:
  - OS: iOS 12.0
  - RAM: 2GB
  - 저장공간: 100MB

### 13.3 설치 크기
- **APK**: 약 30-40MB
- **설치 후**: 약 80-100MB

### 13.4 업데이트
- **자동 업데이트**: 스토어 정책 따름
- **강제 업데이트**: 없음 (현재)
- **롤백**: 스토어에서 이전 버전 다운로드

---

## 14. 성능 벤치마크

### 14.1 현재 성능 (측정 필요)
| 작업 | 목표 시간 | 실제 시간 | 상태 |
|------|-----------|-----------|------|
| 앱 시작 (콜드) | < 3초 | TBD | 측정 필요 |
| 앱 시작 (웜) | < 1초 | TBD | 측정 필요 |
| 레시피 목록 로드 | < 100ms | TBD | 측정 필요 |
| 계산 결과 표시 | < 100ms | ✅ 즉시 | 양호 |
| 레시피 저장 | < 1초 | ✅ ~300ms | 양호 |
| 타이머 시작 | < 1초 | ✅ ~500ms | 양호 |
| 화면 전환 | < 300ms | ✅ ~200ms | 양호 |

### 14.2 부하 테스트
- **1000개 레시피**: 로드 시간 (TODO)
- **10개 동시 타이머**: 성능 영향 (TODO)
- **24시간 백그라운드**: 배터리 소모 (TODO)

---

## 15. 품질 목표

### 15.1 신뢰성
- **MTBF (Mean Time Between Failures)**: > 1000시간
- **MTTR (Mean Time To Repair)**: < 1시간 (앱 재시작)

### 15.2 가용성
- **업타임**: 99.9% (로컬 앱이므로 디바이스 의존)
- **다운타임**: 앱 업데이트 시에만

### 15.3 사용성
- **학습 시간**: 첫 사용자가 10분 내 주요 기능 사용
- **효율성**: 레시피 생성 및 타이머 시작 < 5분
- **만족도**: 4.5/5.0 목표 (스토어 리뷰)

### 15.4 유지보수성
- **코드 변경 시간**: 새 기능 추가 < 1일
- **버그 수정 시간**: 긴급 버그 < 4시간

---

## 16. 제약사항 및 가정

### 16.1 기술적 제약
- **Flutter 버전**: 3.x 필요
- **Dart 버전**: 3.x 필요
- **SQLite**: 로컬 저장소만 지원
- **백그라운드 서비스**: Android/iOS만 완전 지원

### 16.2 비즈니스 제약
- **예산**: 개인 프로젝트 수준
- **팀**: 1-2명 개발자
- **일정**: 점진적 개발

### 16.3 가정
- **사용자**: 제빵에 관심 있는 일반인
- **디바이스**: 최신 3년 내 스마트폰
- **네트워크**: 필요 없음
- **사용 빈도**: 주 1-2회

---

## 17. 비기능 요구사항 우선순위

### P0 (Critical)
- ✅ 계산 정확도 100%
- ✅ 타이머 정확도 (±1초)
- ✅ 데이터 무결성
- ✅ 앱 안정성 (크래시 없음)

### P1 (Important)
- ✅ 응답 시간 < 1초
- ⬜ 배터리 효율성
- ⬜ 메모리 사용 최적화
- ✅ 사용자 경험

### P2 (Nice to Have)
- ⬜ 접근성 지원
- ⬜ 다국어 지원
- ⬜ 성능 모니터링
- ⬜ 에러 트래킹

### P3 (Future)
- ⬜ 클라우드 동기화
- ⬜ 오프라인 우선 아키텍처
- ⬜ Progressive Web App

---

## 18. 개선 로드맵

### Phase 1 (현재 - v0.1)
- [x] 기본 계산기 기능
- [x] 타이머 시스템
- [x] 로컬 데이터베이스
- [ ] 안정성 테스트
- [ ] 성능 최적화

### Phase 2 (v0.2 - v0.5)
- [ ] 사용자 인증 강화
- [ ] 레시피 관리 개선
- [ ] 타이머 고급 기능
- [ ] UI/UX 개선
- [ ] 단위 테스트 작성

### Phase 3 (v1.0)
- [ ] 스토어 출시
- [ ] 클라우드 백업
- [ ] 다국어 지원
- [ ] 성능 모니터링
- [ ] 사용자 피드백 반영

### Phase 4 (v2.0+)
- [ ] 멀티 플랫폼 출시 (iOS)
- [ ] 레시피 공유 기능
- [ ] AI 기반 추천
- [ ] 커뮤니티 기능
